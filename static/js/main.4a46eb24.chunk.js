(this["webpackJsonpswag-shop-web"]=this["webpackJsonpswag-shop-web"]||[]).push([[0],{10:function(t,e,c){},15:function(t,e,c){},17:function(t,e,c){},19:function(t,e,c){},20:function(t,e,c){},24:function(t,e,c){"use strict";c.r(e);var n=c(0),i=c.n(n),s=c(5),r=c.n(s),a=(c(15),c(4)),o=(c(10),c(6)),d=(c(16),function t(){Object(o.a)(this,t),this.getProducts=function(){return new Promise((function(t,e){fetch("http://localhost:3004/product").then((function(e){t(e.json())}))}))}}),u=(c(17),"notif_wishlist_changed"),l="notif_cart_changed",b={},j=null,h=function t(){return Object(o.a)(this,t),this.postNotification=function(t,e){for(var c=b[t],n=0;n<c.length;n++){c[n].callBack(e)}},this.removeObserver=function(t,e){var c=b[e];if(c)for(var n=0;n<c.length;n++)if(t===c[n].observer){c.splice(n,1),b[e]=c;break}},this.addObserver=function(t,e,c){b[t]||(b[t]=[]);var n={observer:e,callBack:c};b[t].push(n)},j||(j=this),j},f=new h,O=null,m=[],p=[],v=function t(){return Object(o.a)(this,t),this.itemOnWishList=function(t){for(var e=0;e<m.length;e++)if(m[e]._id===t._id)return!0;return!1},this.addWishListItem=function(t){m.push(t),f.postNotification(u,m)},this.removeWishListItem=function(t){for(var e=0;e<m.length;e++)if(m[e]._id===t._id){m.splice(e,1),f.postNotification(u,m);break}},this.addCartItem=function(t){p.push(t),f.postNotification(l,p)},this.addQuantity=function(t){p.push(t),f.postNotification(l,p)},this.cartItemCount=function(){return p.length},this.itemOnCart=function(t){for(var e=0;e<p.length;e++)if(p[e]._id===t._id)return!0;return!1},this.removeCartItem=function(t){for(var e=0;e<p.length;e++)if(p[e]._id===t._id){p.splice(e,1),f.postNotification(l,p);break}},O||(O=this),O},x=c(1);var g=function(t){var e,c=this,i=new v,s=new h,r=Object(n.useState)(!1),o=Object(a.a)(r,2),d=o[0],b=o[1],j=Object(n.useState)(!1),f=Object(a.a)(j,2),O=f[0],m=f[1];return Object(n.useEffect)((function(){return s.addObserver(u,c,(function(e){b(i.itemOnWishList(t.product))})),s.addObserver(l,c,(function(){m(i.itemOnCart(t.product))})),function(){s.removeObserver(this,u),s.removeObserver(this,l)}})),e=d?"btn btn-danger":"btn btn-primary",Object(x.jsxs)("div",{className:"card product",children:[Object(x.jsx)("img",{className:"card-img-top",src:t.product.imgUrl,alt:"Product"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h6",{className:"card-title",children:t.product.title}),Object(x.jsxs)("p",{className:"card-text",children:["Price: $",t.product.price]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("a",{href:"#",onClick:function(){O?i.addQuantity(t.product):i.addCartItem(t.product)},className:"btn btn-outline-secondary",children:["Add to Cart ",Object(x.jsx)("i",{class:"bi bi-cart"})]}),Object(x.jsx)("a",{href:"#",onClick:function(){d?i.removeWishListItem(t.product):i.addWishListItem(t.product)},className:e,children:Object(x.jsx)("i",{class:"bi bi-heart-fill"})})]})]})]})};c(19),c(20);var N=function(t){var e=new v;return Object(x.jsxs)("li",{className:"list-group-item d-flex pc-condensed",children:[Object(x.jsx)("a",{onClick:function(){"cart"===t.parent?e.removeCartItem(t.product):e.removeWishListItem(t.product)},className:"btn btn-outline-danger",children:"X"}),Object(x.jsxs)("p",{children:[t.product.title," | ",Object(x.jsx)("b",{children:t.product.price})]})]})};var w=function(t){var e=this,c=new h,i=Object(n.useState)([]),s=Object(a.a)(i,2),r=s[0],o=s[1];return Object(n.useEffect)((function(){return c.addObserver(u,e,(function(t){o(t)})),function(){c.removeObserver(this,u)}})),Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h4",{className:"card-title",children:"Wish List"}),Object(x.jsx)("ul",{className:"list-group",children:r.map((function(t){return Object(x.jsx)(N,{product:t,parent:"wishlist"},t._id)}))})]})})},C=c(9),_=c(7);var I=function(t){var e=this,c=new h,i=Object(n.useState)([]),s=Object(a.a)(i,2),r=s[0],o=s[1];return Object(n.useEffect)((function(){return c.addObserver(l,e,(function(t){o(t)})),function(){c.removeObserver(this,l)}})),Object(x.jsxs)(_.a,Object(C.a)(Object(C.a)({},t),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(_.a.Header,{closeButton:!0,children:Object(x.jsx)(_.a.Title,{id:"contained-modal-title-vcenter",children:" Shopping Bag "})}),Object(x.jsx)(_.a.Body,{children:r.map((function(t){return Object(x.jsx)(N,{product:t,parent:"cart"},t._id)}))})]}))},k=c.p+"static/media/logo.6ce24c58.svg";var S=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("img",{src:k,className:"App-logo",alt:"logo"}),Object(x.jsx)("h2",{children:"Game Shop"})]})})},y=new d;var L=function(){var t=this,e=new v,c=new h,s=Object(n.useState)([]),r=Object(a.a)(s,2),o=r[0],d=r[1],u=Object(n.useState)(0),b=Object(a.a)(u,2),j=b[0],f=b[1],O=i.a.useState(!1),m=Object(a.a)(O,2),p=m[0],N=m[1];Object(n.useEffect)((function(){return C(),c.addObserver(l,t,(function(){f(e.cartItemCount())})),function(){c.removeObserver(this,l)}}));var C=function(){y.getProducts().then((function(t){d(t)}),(function(t){}))};return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsxs)("header",{className:"App-header",children:[Object(x.jsx)(S,{}),Object(x.jsxs)("a",{href:"#",onClick:function(){return N(!0)},className:"btn btn-outline-secondary",children:[Object(x.jsx)("i",{class:"bi bi-bag"}),Object(x.jsx)("span",{class:"badge badge-success",children:j})]}),Object(x.jsx)(I,{show:p,onHide:function(){return N(!1)}})]}),Object(x.jsx)("div",{className:"container-fluid App-main",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-sm-8",children:Object(x.jsx)("div",{className:"row",children:o.map((function(t){return Object(x.jsx)("div",{className:"col-sm-4",children:Object(x.jsx)(g,{product:t})},t._id)}))})}),Object(x.jsx)("div",{className:"col-sm-4",children:Object(x.jsx)(w,{})})]})})]})},W=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,26)).then((function(e){var c=e.getCLS,n=e.getFID,i=e.getFCP,s=e.getLCP,r=e.getTTFB;c(t),n(t),i(t),s(t),r(t)}))};r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(L,{})}),document.getElementById("root")),W()}},[[24,1,2]]]);
//# sourceMappingURL=main.4a46eb24.chunk.js.map